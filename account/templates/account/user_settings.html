{% extends "account/profile_base.html" %}

{% load i18n bootstrap3 fontawesome favorites staticfiles %}

{% block js_extra %}
    {{ block.super }}
    <script type="text/javascript" src="{% static 'account/js/notification_options.js' %}"></script>
{% endblock %}

{% block subcontent %}
    <div class="well user-details">
        {% comment %}
        <a class="btn btn-default">{% trans "Vaihda salasana" %}</a>
        {% endcomment %}
        <div class="clearfix"></div>
        <div class="row">
            <div class="col-md-3">
                <h2 class="h3-style">{% trans "Profiilikuva" %}</h2>
                <div class="ajaxy-wrap">
                    {% include "account/user_settings_picture.html" %}
                </div>
            </div>
            <div class="col-md-5">
                <h2 class="h3-style">{% trans "Seuratut aiheet" %}</h2>
                <div class="ajaxy-wrap">
                    {% fav_get_ct_id 'tagging.tag' as ct_id %}
                    {% include "favorite/favorite_detail.html" with user=object ct_id=ct_id title=_("Seuraa aiheita") button_text=_("Seuraa aiheita") %}
                </div>
                <h2 class="h3-style">{% trans "Seuratut organisaatiot" %}</h2>
                <div class="ajaxy-wrap">
                    {% fav_get_ct_id 'organization.organization' as ct_id %}
                    {% include "favorite/favorite_detail.html" with user=object ct_id=ct_id title=_("Seuraa organisaatiota") %}
                </div>
            </div>
        </div>

        <hr>
        <div class="ajaxy-wrap editable-wrap">
            {% include "account/user_settings_detail.html" %}
        </div>

        <hr>
        <div class="ajaxy-wrap editable-wrap">
            {% include 'account/notification_options/options_detail.html' %}
        </div>

        <hr>
        <h3>{% trans "Tiliasetukset" %}</h3>

        {% if not object.facebook_associated %}
            <a class="btn btn-default" href="{% url 'social:begin' 'facebook' %}?next={{ request.path }}&action=associate">
                {% trans "Yhdist채 Facebook-tiliin" %}
            </a>
        {% else %}
            <form action="{% url 'social:disconnect' 'facebook' %}?next={{ request.path }}" method="post">
                {% csrf_token %}
                <button type="submit" class="btn btn-default">{% trans "Poista Facebook-tilin yhdistys" %}</button>
            </form>
        {% endif %}

        {% if object.status != object.STATUS_ARCHIVED and user in perm.account.CanEditUser %}
            <form action="{% url 'account:close' object.pk %}" method="post" style="display:inline-block; width:100%; margin-top:10px;" onsubmit="return confirm('{% trans 'Haluatko varmasti sulkea k채ytt채j채tilisi?' %}');">
                {% csrf_token %}
                <button type="submit" class="btn btn-default">{% trans "Sulje tili" %}</button>
            </form>
        {% endif %}
    </div>
{% endblock subcontent %}